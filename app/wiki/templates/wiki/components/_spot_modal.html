{# TODO: test with skills and make better, maybe limit height/width of abc notation#}
<div class="relative z-10 fade-in fade-out"
     aria-labelledby="modal-title"
     role="dialog"
     aria-modal="true"
     id="spot-{{ spot.pk }}-modal">
    <div class="fixed inset-0 bg-blue-100 bg-opacity-75 backdrop-blur-sm fade-in fade-out"></div>
    <div class="overflow-scroll fixed inset-0 z-10 mt-10 w-screen bg-white border-t-2 border-blue-300 shadow-lg transition-all transform slide-up">
        <div class="flex overflow-hidden flex-col gap-2 px-4 pt-5 pb-4 w-full text-left rounded-lg transform sm:px-8 md:mx-auto md:max-w-5xl">
            <header class="flex justify-center w-full" id="modal-title">
                <h3 class="text-xl font-bold leading-6 text-center text-purple-700 border-b-2 border-purple-700 sm:text-2xl"
                    id="modal-title">
                    {% if spot.nickname %}
                        Spot: {{ spot.nickname }}
                    {% else %}
                        Spot: {{ spot.order }}
                    {% endif %}
                </h3>
                <a href="{% url 'piece_detail' spot.piece.pk %}"
                   hx-get="{% url 'piece_detail' spot.piece.pk %}"
                   hx-swap="delete swap:300ms"
                   hx-target="#spot-{{ spot.pk }}-modal"
                   hx-trigger="click"
                   hx-push-url="{% url 'piece_detail' spot.piece.pk %}"
                   class="absolute top-0 right-0 z-20 m-4 text-rose-500 rounded-xl hover:text-rose-700 hover:bg-rose-50">
                    <span class="sr-only">Close</span>
                    <span class="size-8 icon-[heroicons--x-circle-solid]" aria-hidden="true"></span>
                </a>
            </header>
            <div class="flex flex-col flex-shrink gap-2">
                <div class="flex-shrink mt-1">{{ spot.description|linebreaks }}</div>
                {% if spot.measures %}<p class="flex-shrink mt-1">{{ spot.measures }}</p>{% endif %}
                <div class="flex-grow max-w-full">
                    {% if spot.abc_notation %}
                        {% include "wiki/components/_abcjs_viewer.html" with viewer_id=spot_notes_id notes=spot.abc_notation %}
                    {% endif %}
                </div>
                {% if spot.recording %}
                    <div class="flex flex-col gap-2 justify-start text-xl font-bold text-black sm:flex-row sm:items-center">
                        Listen:
                        <audio controls class="max-w-full">
                            <source src="{{ spot.recording.file.url }}" type="audio/mpeg" />
                        </audio>
                    </div>
                {% endif %}
                {% if spot.skills %}
                    <div class="flex flex-shrink-0 gap-2">
                        <h4 class="text-lg">Skills</h4>
                        <ul class="flex flex-wrap gap-2">
                            {% for skill in spot.skills.all %}
                                <li>{% component "skill_card" skill=skill %}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{# vim: se ft=htmldjango : #}
